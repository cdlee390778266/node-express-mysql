<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>后台管理系统 1.3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Le styles -->



    <link rel="stylesheet" href="view/admin/assets/css/style.css">
    <link rel="stylesheet" href="view/admin/assets/css/loader-style.css">
    <link rel="stylesheet" href="view/admin/assets/css/bootstrap.css">

    <link rel="stylesheet" type="text/css" href="view/admin/assets/js/progress-bar/number-pb.css">
    
    <link rel="stylesheet" href="view/admin/js/bootstrap_file_input/fileinput.css">

    <style type="text/css">
    canvas#canvas4 {
        position: relative;
        top: 20px;
    }
    </style>




    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="view/admin/assets/ico/minus.png">
</head>

<body> 
    <!-- Preloader -->
    <div id="preloader">
        <div id="status">&nbsp;</div>
    </div>
    <!-- TOP NAVBAR -->
    <% include common/header %>

    <!-- /END OF TOP NAVBAR -->
    
    <!-- SIDE MENU -->
    <% include common/left %>
    <!-- END OF SIDE MENU -->


    <!--  PAPER WRAP -->
    <div class="wrap-fluid">
        <div class="container-fluid paper-wrap bevel tlbr">





            <!-- CONTENT -->
            <!--TITLE -->
            <div class="row">
                <div id="paper-top">
                    <div class="col-lg-3">
                        <h2 class="tittle-content-header">
                            <i class="icon-window"></i> 
                            <span>Logo
                            </span>
                        </h2>

                    </div>

                    <div class="col-lg-7">
                        <div class="devider-vertical visible-lg"></div>
                        <div class="tittle-middle-header">

                            <div class="alert">
                                <button type="button" class="close" data-dismiss="alert">×</button>
                                <span class="tittle-alert entypo-info-circled"></span>
                                Welcome back,&nbsp;
                                <strong>Dave mattew!</strong>&nbsp;&nbsp;Your last sig in at Yesterday, 16:54 PM
                            </div>


                        </div>

                    </div>
                    <div class="col-lg-2">
                        <div class="devider-vertical visible-lg"></div>
                        <div class="btn-group btn-wigdet pull-right visible-lg">
                            <div class="btn">
                                Widget</div>
                            <button data-toggle="dropdown" class="btn dropdown-toggle" type="button">
                                <span class="caret"></span>
                                <span class="sr-only">Toggle Dropdown</span>
                            </button>
                            <ul role="menu" class="dropdown-menu">
                                <li>
                                    <a href="#">
                                        <span class="entypo-plus-circled margin-iconic"></span>Add New</a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="entypo-heart margin-iconic"></span>Favorite</a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="entypo-cog margin-iconic"></span>Setting</a>
                                </li>
                            </ul>
                        </div>


                    </div>
                </div>
            </div>
            <!--/ TITLE -->

            <!-- BREADCRUMB -->
            <ul id="breadcrumb">
                <li>
                    <span class="entypo-home"></span>
                </li>
                <li><i class="fa fa-lg fa-angle-right"></i>
                </li>
                <li><a href="#" title="Sample page 1">Home</a>
                </li>
                <li><i class="fa fa-lg fa-angle-right"></i>
                </li>
                <li><a href="#" title="Sample page 1">Dashboard</a>
                </li>
                <li class="pull-right">
                    <div class="input-group input-widget">

                        <input style="border-radius:15px" type="text" placeholder="Search..." class="form-control">
                    </div>
                </li>
            </ul>

            <!-- END OF BREADCRUMB -->
            <div class="content-wrap">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="nest" id="horizontalClose">
                            <div class="title-alt">
                                <h6>管理员帐号</h6>
                                <div class="titleToggle">

                                   <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal-allUser">添加管理员</button>
                                </div>
                            </div>

                            <div class="body-nest" id="horizontal" style="display: block;">
                                <% 
                                    if(data.length<=0){
                                %>
                                权限不够
                                <%        
                                    }else{
                                %>

                                <table class="table table-striped table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th>登录ID</th>
                                        <th>笔名</th>
                                        <th>真实姓名</th>
                                        <th>权限级别</th>
                                        <th>登录时间</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>

                                <%
                                        for(var i=0;i<data.length;i++){
                                %>
                                
                                <tr>
                                        <td><%= data[i].loginname %></td>
                                        <td><%= data[i].name %></td>
                                        <td><%= data[i].pseudonym %></td>
                                        <td><%= data[i].level %></td>
                                        <td><%= dateformat(data[i].logintime) %></td>
                                        <td>
                                        <button  class="btn btn-success btn-update" data-userId="<%= data[i].loginname %>">更改</button>
                                        <button  class="btn btn-warning user-handle" data-userId="<%= data[i].loginname %>"  >删除</button>
                                        </td>
                                </tr>
                                <%
                                        }
                                   
                                %>
                                    </tbody>
                                </table>
                                <nav>
                                  <ul class="pagination">
                                    <li><a href="#">首页</a></li>
                                    <li><a href="#">1</a></li>
                                    <li><a href="#">2</a></li>
                                    <li><a href="#">3</a></li>
                                    <li><a href="#">4</a></li>
                                    <li><a href="#">5</a></li>
                                    <li><a href="#">尾页</a></li>
                                  </ul>
                                </nav>
                                <%
                                       
                                    }
                                %>

                            </div>

                        </div>
                    </div>
                </div>




            </div>

           
        </div>
    </div>
    <!--  END OF PAPER WRAP -->

    <!-- RIGHT SLIDER CONTENT -->
    <div class="sb-slidebar sb-right">
        <div class="right-wrapper">
            <div class="row">
                <h3>
                    <span><i class="entypo-gauge"></i>&nbsp;&nbsp;MAIN WIDGET</span>
                </h3>
                <div class="col-lg-12">

                    <div class="widget-knob">
                        <span class="chart" style="position:relative" data-percent="86">
                            <span class="percent"></span>
                        </span>
                    </div>
                    <div class="widget-def">
                        <b>Distance traveled</b>
                        <br>
                        <i>86% to the check point</i>
                    </div>

                    <div class="widget-knob">
                        <span class="speed-car" style="position:relative" data-percent="60">
                            <span class="percent2"></span>
                        </span>
                    </div>
                    <div class="widget-def">
                        <b>The average speed</b>
                        <br>
                        <i>30KM/h avarage speed</i>
                    </div>


                    <div class="widget-knob">
                        <span class="overall" style="position:relative" data-percent="25">
                            <span class="percent3"></span>
                        </span>
                    </div>
                    <div class="widget-def">
                        <b>Overall result</b>
                        <br>
                        <i>30KM/h avarage Result</i>
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-top:0;" class="right-wrapper">
            <div class="row">
                <h3>
                    <span><i class="entypo-chat"></i>&nbsp;&nbsp;CHAT</span>
                </h3>
                <div class="col-lg-12">
                    <span class="label label-warning label-chat">Online</span>
                    <ul class="chat">
                        <li>
                            <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-circle" src="http://api.randomuser.me/portraits/thumb/men/20.jpg">
                                </span><b>Dave Junior</b>
                                <br><i>Last seen : 08:00 PM</i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-circle" src="http://api.randomuser.me/portraits/thumb/men/21.jpg">
                                </span><b>Kenneth Lucas</b>
                                <br><i>Last seen : 07:21 PM</i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-circle" src="http://api.randomuser.me/portraits/thumb/men/22.jpg">
                                </span><b>Heidi Perez</b>
                                <br><i>Last seen : 05:43 PM</i>
                            </a>
                        </li>


                    </ul>

                    <span class="label label-chat">Offline</span>
                    <ul class="chat">
                        <li>
                            <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle" src="http://api.randomuser.me/portraits/thumb/men/23.jpg">
                                </span><b>Dave Junior</b>
                                <br><i>Last seen : 08:00 PM</i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle" src="http://api.randomuser.me/portraits/thumb/women/24.jpg">
                                </span><b>Kenneth Lucas</b>
                                <br><i>Last seen : 07:21 PM</i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle" src="http://api.randomuser.me/portraits/thumb/men/25.jpg">
                                </span><b>Heidi Perez</b>
                                <br><i>Last seen : 05:43 PM</i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle" src="http://api.randomuser.me/portraits/thumb/women/25.jpg">
                                </span><b>Kenneth Lucas</b>
                                <br><i>Last seen : 07:21 PM</i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle" src="http://api.randomuser.me/portraits/thumb/men/26.jpg">
                                </span><b>Heidi Perez</b>
                                <br><i>Last seen : 05:43 PM</i>
                            </a>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- END OF RIGHT SLIDER CONTENT-->

    <!-- 添加管理员弹窗 -->
    <div class="modal fade " id="myModal-allUser" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none;">
      <div class="modal-dialog ">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel">添加管理员</h4>
          </div>
          <div class="modal-body">
                <div class="form_center">
                <form role="form" class="form-horizontal" id="add-user" novalidate="novalidate" enctype="multipart/form-data">

                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">用户登录ID：</label>
                        <div class="col-lg-9">
                            <input id="loginID" name="loginID" class="form-control" value="" type="text">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">用户笔名：</label>
                        <div class="col-lg-9">
                            <input id="pseudonym" name="pseudonym" class="form-control" value="" type="text">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">用户密码：</label>
                        <div class="col-lg-9">
                            <input id="loginPWD" name="loginPWD" class="form-control" value="" type="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">确认密码：</label>
                        <div class="col-lg-9">
                            <input id="loginCPWD" name="loginCPWD" class="form-control" value="" type="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">真实姓名：</label>
                        <div class="col-lg-9">
                            <input id="name" name="name" class="form-control" value="" type="text">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">电子邮箱：</label>
                        <div class="col-lg-9">
                            <input id="email" name="email" class="form-control" value="" type="text">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" >用户头像：</label>
                        <div class="col-lg-9">
                            <input id="userface" name="userface" class="" type="file" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">权限：</label>
                        <div class="col-lg-9">
                            <select class="form-control" name="level" id="level">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                            </select>
                        </div>
                    </div>

                </form>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="btn-add">增加用户</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 修改管理员弹窗 -->
    <div class="modal fade " id="myModal-updateUser" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none;">
      <div class="modal-dialog ">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" >修改管理员信息</h4>
          </div>
          <div class="modal-body">
                <div class="form_center">
                <form role="form" class="form-horizontal" id="update-user" novalidate="novalidate" enctype="multipart/form-data">

                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">用户登录ID：</label>
                        <div class="col-lg-9">
                            <input id="uloginID" name="uloginID" class="form-control" value="" type="text" disabled="disabled" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">用户笔名：</label>
                        <div class="col-lg-9">
                            <input id="upseudonym" name="upseudonym" class="form-control" value="" type="text">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">原始密码：</label>
                        <div class="col-lg-9">
                            <input id="oldPWD" name="oldPWD" class="form-control" value="" type="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">新密码：</label>
                        <div class="col-lg-9">
                            <input id="newPWD" name="newPWD" class="form-control" value="" type="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">确认新密码：</label>
                        <div class="col-lg-9">
                            <input id="newCPWD" name="newCPWD" class="form-control" value="" type="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">真实姓名：</label>
                        <div class="col-lg-9">
                            <input id="uname" name="uname" class="form-control" value="" type="text">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 col-sm-3 control-label" for="basehost">权限：</label>
                        <div class="col-lg-9">
                            <select class="form-control" name="level" id="ulevel">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                            </select>
                        </div>
                    </div>

                </form>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="btn-update">保存</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 消息提示弹窗 -->
    <div class="modal fade" id="mes">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
            <p></p>
          </div>
        </div>
      </div>
    </div>

    <!-- 删除确认弹窗弹窗 -->
    <div class="modal fade" id="confirm">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">消息提示</h4>
          </div>
          <div class="modal-body">
            <p>您确定删除所选用户吗？</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary " id="delete">确定</button>
            <button type="button" class="btn btn-warning" data-dismiss="modal"  >关闭</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <script src="view/admin/assets/js/progress-bar/src/jquery.velocity.min.js"></script>
    <script src="view/admin/assets/js/progress-bar/number-pb.js"></script>
    <script src="view/admin/assets/js/progress-bar/progress-app.js"></script>



    <!-- MAIN EFFECT -->
    <script type="text/javascript" src="view/admin/assets/js/preloader.js"></script>
    <script type="text/javascript" src="view/admin/assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="view/admin/assets/js/app.js"></script>
    <script type="text/javascript" src="view/admin/assets/js/load.js"></script>
    <script type="text/javascript" src="view/admin/assets/js/main.js"></script>




    <!-- GAGE -->


    <script type="text/javascript" src="view/admin/assets/js/chart/jquery.flot.js"></script>
    <script type="text/javascript" src="view/admin/assets/js/chart/jquery.flot.resize.js"></script>
   
    <script type="text/javascript" src="view/admin/assets/js/speed/canvasgauge-coustom.js"></script>
    <script type="text/javascript" src="view/admin/assets/js/countdown/jquery.countdown.js"></script>



    <script src="view/admin/assets/js/jhere-custom.js"></script>

    <script src="view/admin/js/bootstrap_file_input/fileinput.js"></script>
    <script src="view/admin/js/bootstrap_file_input/zh.js"></script>

    <script type="text/javascript">
    /* Javascript
     *
     * See http://jhere.net/docs.html for full documentation
     */
    $(window).on('load', function() {
        $('#mapContainer').jHERE({
            center: [52.500556, 13.398889],
            type: 'smart',
            zoom: 10
        }).jHERE('marker', [52.500556, 13.338889], {
            icon: 'view/admin/assets/img/marker.png',
            anchor: {
                x: 12,
                y: 32
            },
            click: function() {
                alert('Hallo from Berlin!');
            }
        })
            .jHERE('route', [52.711, 13.011], [52.514, 13.453], {
                color: '#FFA200',
                marker: {
                    fill: '#86c440',
                    text: '#'
                }
            });
    });
    </script>
    <script type="text/javascript">
    var output, started, duration, desired;

    // Constants
    duration = 5000;
    desired = '50';

    // Initial setup
    output = $('#speed');
    started = new Date().getTime();

    // Animate!
    animationTimer = setInterval(function() {
        // If the value is what we want, stop animating
        // or if the duration has been exceeded, stop animating
        if (output.text().trim() === desired || new Date().getTime() - started > duration) {
            console.log('animating');
            // Generate a random string to use for the next animation step
            output.text('' + Math.floor(Math.random() * 60)

            );

        } else {
            console.log('animating');
            // Generate a random string to use for the next animation step
            output.text('' + Math.floor(Math.random() * 120)

            );
        }
    }, 5000);
    </script>
    <script type="text/javascript">
    $('#getting-started').countdown('2015/01/01', function(event) {
        $(this).html(event.strftime(

            '<span>%M</span>' + '<span class="start-min">:</span>' + '<span class="start-min">%S</span>'));
    });

    $(function(){
        var delIdArr = [];

        //上传图片预览插件初始化
        $("#userface").fileinput({
            language: 'zh',
            allowedFileExtensions : ['jpg', 'png','gif'],
            showUpload: false, //是否显示上传按钮
            showCaption: false,//是否显示标题
        });

        //删除管理员
        $('.user-handle').click(function(){
            $('#confirm').modal();
            delIdArr = [];
            delIdArr.push($(this).data('userid'));
        });

        $('#delete').click(function(){
            console.log(delIdArr)
            $('#confirm').modal('hide');
                $.ajax({
                    url : '/adminDelUser',
                    type : 'post',
                    data : 'loginnames=' + delIdArr,
                    success : function(data){
                        $('#mes .modal-body').html(data.data);
                        $('#mes').modal({
                            keyboard : true
                        });
                        setTimeout(function(){
                        $('#mes').modal('hide');
                            if(data.status == 0){
                                location.href = '/adminUserList';
                            }
                        },1000);
                    }
                })
        })

        //添加管理员
        $('#btn-add').click(function(){
            $('#add-user').submit();
        })
        
         $('#add-user').validate({
            rules : {
                loginID : { 
                    required : true, 
                    rangelength : [5,20]
                },
                pseudonym : { 
                    required : true, 
                    rangelength : [2,10]
                },
                loginPWD : { 
                    required : true, 
                    rangelength : [5,20]
                },
                loginCPWD : { 
                    required : true, 
                    rangelength : [5,20],
                    equalTo : '#loginPWD'
                },
                email : { 
                    email : true
                }
            },
            messages : {
                loginID : {
                    required : '登录ID不得为空！',
                    rangelength :  $.validator.format('登录ID限制在{0}-{1}位！')
                },
                pseudonym : { 
                    required : '用户笔名不得为空！', 
                    rangelength : $.validator.format('用户笔名限制在{0}-{1}位！')
                },
                loginPWD : { 
                    required : '密码不得为空！', 
                    rangelength : $.validator.format('密码限制在{0}-{1}位！')
                },
                loginCPWD : { 
                    required : '确认密码不得为空！', 
                    rangelength : $.validator.format('登录ID限制在{0}-{1}位！'),
                    equalTo : '确认密码与用户密码不同!',
                }
            },
            //使用方法加载 class 并添加文本
            success : function (label) {
                
            },
            //高亮显示有错误的元素，变色式
            highlight: function(element, errorClass) {
                 
            },
            //成功的元素移出错误高亮
            unhighlight : function (element, errorClass) {
               $(element).parent().find('.error').remove(); 
            },
            submitHandler : function (form) {
                $('#myModal-allUser').modal('hide');
                var data = new FormData($('#add-user')[0]);
                data.append('date',new Date().getTime());
                
                $.ajax({
                    url: '/adminAddUser',
                    type: 'post',
                    data: data,
                    cache: false,
                    contentType: false,    //不可缺
                    processData: false,    //不可缺
                })
                .done(function(data) {
                    $('#mes .modal-body').html(data.data);
                    $('#mes').modal({
                        keyboard : true
                    });
                    setTimeout(function(){
                    $('#mes').modal('hide');
                        if(data.status == 0){
                            location.href = '/adminUserList';
                        }
                    },1000);
                })

            }
        });

         //修改管理员信息
         $('.btn-update').click(function (e) {
            $('#uloginID').val($(this).parents('tr').find('td').eq(0).html());
            $('#upseudonym').val($(this).parents('tr').find('td').eq(1).html());
            $('#uname').val($(this).parents('tr').find('td').eq(2).html());
            $('#ulevel').val($(this).parents('tr').find('td').eq(3).html());
            $('#myModal-updateUser').modal();  
        })

        $('#btn-update').click(function(){
            $('#update-user').submit();
        })
        
         $('#update-user').validate({
            rules : {
                uloginID : { 
                    required : true, 
                    rangelength : [5,20]
                },
                oldPWD : { 
                    required : true, 
                    rangelength : [5,20]
                },
                newPWD : { 
                    required : true, 
                    rangelength : [5,20]
                },
                newCPWD : { 
                    required : true, 
                    rangelength : [5,20],
                    equalTo : '#newPWD'
                }
            },
            messages : {
                loginID : {
                    required : '登录ID不得为空！',
                    rangelength :  $.validator.format('登录ID限制在{0}-{1}位！')
                },
                oldPWD : { 
                    required : '原始密码不得为空！', 
                    rangelength : $.validator.format('原始密码限制在{0}-{1}位！')
                },
                newPWD : { 
                    required : '新密码不得为空！', 
                    rangelength : $.validator.format('新密码限制在{0}-{1}位！')
                },
                newCPWD : { 
                    required : '确认密码不得为空！', 
                    rangelength : $.validator.format('新密码限制在{0}-{1}位！'),
                    equalTo : '新密码与确认密码不同!',
                }
            },
            //使用方法加载 class 并添加文本
            success : function (label) {
                
            },
            //高亮显示有错误的元素，变色式
            highlight: function(element, errorClass) {
                 
            },
            //成功的元素移出错误高亮
            unhighlight : function (element, errorClass) {
               $(element).parent().find('.error').remove(); 
            },
            submitHandler : function (form) {

                $('#myModal-updateUser').modal('hide');
                var data = {
                    uloginID : $('#uloginID').val(),
                    upseudonym : $('#upseudonym').val(),
                    oldPWD : $('#oldPWD').val(),
                    newPWD : $('#newPWD').val(),
                    newCPWD : $('#newCPWD').val(),
                    uname : $('#uname').val(),
                    ulevel : $('#ulevel').val()
                }
                
                $.ajax({
                    url: '/adminUpdateUser',
                    type: 'post',
                    data: data,
                })
                .done(function(data) {
                    $('#mes .modal-body').html(data.data);
                    $('#mes').modal({
                        keyboard : true
                    });
                    setTimeout(function(){
                    $('#mes').modal('hide');
                        if(data.status == 0){
                            location.href = '/adminUserList';
                        }
                    },1000);
                })

            }
        });

        

    })

    </script>


</body>

</html>
